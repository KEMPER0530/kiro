# ãƒ†ã‚¹ãƒˆã‚¬ã‚¤ãƒ‰

ã“ã®ã‚¬ã‚¤ãƒ‰ã§ã¯ã€YouTube eFootball Player ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ†ã‚¹ãƒˆæˆ¦ç•¥ã€ãƒ„ãƒ¼ãƒ«ã€æ‰‹é †ã«ã¤ã„ã¦åŒ…æ‹¬çš„ãªæƒ…å ±ã‚’æä¾›ã—ã¾ã™ã€‚

## ğŸ§ª ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

### ãƒ†ã‚¹ãƒˆãƒ”ãƒ©ãƒŸãƒƒãƒ‰

```text
    /\
   /  \     E2Eãƒ†ã‚¹ãƒˆï¼ˆå°‘æ•°ï¼‰
  /____\    - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¸ãƒ£ãƒ¼ãƒ‹ãƒ¼ãƒ†ã‚¹ãƒˆ
 /      \   - ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«ãƒ‘ã‚¹æ¤œè¨¼
/________\  çµ±åˆãƒ†ã‚¹ãƒˆï¼ˆä¸­ç¨‹åº¦ï¼‰
           - APIçµ±åˆ
           - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ“ä½œ
           - ã‚µãƒ¼ãƒ“ã‚¹é–“ç›¸äº’ä½œç”¨
___________
           ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆï¼ˆå¤šæ•°ï¼‰
           - ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ­ã‚¸ãƒƒã‚¯
           - ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
           - ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
```

### ãƒ†ã‚¹ãƒˆã‚¿ã‚¤ãƒ—

1. **ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ**: å€‹åˆ¥ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨é–¢æ•°ã‚’åˆ†é›¢ã—ã¦ãƒ†ã‚¹ãƒˆ
2. **çµ±åˆãƒ†ã‚¹ãƒˆ**: ã‚·ã‚¹ãƒ†ãƒ ã®ç•°ãªã‚‹éƒ¨åˆ†é–“ã®ç›¸äº’ä½œç”¨ã‚’ãƒ†ã‚¹ãƒˆ
3. **ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆ**: å®Œå…¨ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã‚’ãƒ†ã‚¹ãƒˆ
4. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ**: è² è·ä¸‹ã§ã®ã‚·ã‚¹ãƒ†ãƒ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’ãƒ†ã‚¹ãƒˆ
5. **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆ**: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è„†å¼±æ€§ã‚’ãƒ†ã‚¹ãƒˆ

## ğŸ—ï¸ ãƒ†ã‚¹ãƒˆç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### å‰ææ¡ä»¶

- Node.js 18+ ã¨ npm
- Docker ã¨ Docker Compose
- Chrome/Chromium ãƒ–ãƒ©ã‚¦ã‚¶ï¼ˆE2E ãƒ†ã‚¹ãƒˆç”¨ï¼‰

### ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚³ãƒãƒ³ãƒ‰

```bash
# å…¨ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install

# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
cd frontend && npm install

# ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
cd backend && npm install

# ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
cd tests && npm install

# ãƒ†ã‚¹ãƒˆç’°å¢ƒã‚’èµ·å‹•
docker-compose -f docker-compose.test.yml up -d
```

## ğŸ”§ ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ

#### æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

- **Jest**: ãƒ†ã‚¹ãƒˆãƒ©ãƒ³ãƒŠãƒ¼ã¨ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
- **React Testing Library**: React ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
- **@testing-library/user-event**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
- **MSW (Mock Service Worker)**: API ãƒ¢ãƒƒã‚­ãƒ³ã‚°

#### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

```bash
cd frontend

# å…¨ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
npm test

# ã‚¦ã‚©ãƒƒãƒãƒ¢ãƒ¼ãƒ‰ã§ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
npm test -- --watch

# ã‚«ãƒãƒ¬ãƒƒã‚¸ä»˜ãã§ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
npm test -- --coverage

# ç‰¹å®šã®ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’å®Ÿè¡Œ
npm test SearchComponent.test.tsx

# ãƒ‘ã‚¿ãƒ¼ãƒ³ã«ãƒãƒƒãƒã™ã‚‹ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
npm test -- --testNamePattern="should render"
```

#### ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ†ã‚¹ãƒˆä¾‹

```typescript
// src/components/__tests__/SearchComponent.test.tsx
import { render, screen, fireEvent, waitFor } from '@testing-library/react';
import userEvent from '@testing-library/user-event';
import { SearchComponent } from '../SearchComponent';

describe('SearchComponent', () => {
  const mockOnSearch = jest.fn();
  const defaultProps = {
    onSearch: mockOnSearch,
    loading: false,
  };

  beforeEach(() => {
    jest.clearAllMocks();
  });

  it('æ¤œç´¢å…¥åŠ›ã¨ãƒœã‚¿ãƒ³ã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã™ã¹ã', () => {
    render(<SearchComponent {...defaultProps} />);

    expect(
      screen.getByPlaceholderText('eFootballå‹•ç”»ã‚’æ¤œç´¢...')
    ).toBeInTheDocument();
    expect(screen.getByRole('button', { name: /æ¤œç´¢/i })).toBeInTheDocument();
  });

  it('ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡æ™‚ã«onSearchã‚’å‘¼ã³å‡ºã™ã¹ã', async () => {
    const user = userEvent.setup();
    render(<SearchComponent {...defaultProps} />);

    const input = screen.getByPlaceholderText('eFootballå‹•ç”»ã‚’æ¤œç´¢...');
    const button = screen.getByRole('button', { name: /æ¤œç´¢/i });

    await user.type(input, 'eFootball 2024');
    await user.click(button);

    expect(mockOnSearch).toHaveBeenCalledWith('eFootball 2024', undefined);
  });

  it('loadingãŒtrueã®æ™‚ã«ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹ã‚’è¡¨ç¤ºã™ã¹ã', () => {
    render(<SearchComponent {...defaultProps} loading={true} />);

    expect(screen.getByRole('button', { name: /æ¤œç´¢ä¸­/i })).toBeDisabled();
  });

  it('ã‚«ãƒ†ã‚´ãƒªãŒé¸æŠã•ã‚ŒãŸæ™‚ã«ã‚«ãƒ†ã‚´ãƒªã§ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã™ã¹ã', async () => {
    const user = userEvent.setup();
    render(<SearchComponent {...defaultProps} />);

    const categorySelect = screen.getByLabelText('ã‚«ãƒ†ã‚´ãƒª');
    await user.selectOptions(categorySelect, 'gameplay');

    const input = screen.getByPlaceholderText('eFootballå‹•ç”»ã‚’æ¤œç´¢...');
    const button = screen.getByRole('button', { name: /æ¤œç´¢/i });

    await user.type(input, 'ãƒ†ã‚¹ãƒˆã‚¯ã‚¨ãƒª');
    await user.click(button);

    expect(mockOnSearch).toHaveBeenCalledWith('ãƒ†ã‚¹ãƒˆã‚¯ã‚¨ãƒª', 'gameplay');
  });
});
```

#### ãƒ•ãƒƒã‚¯ãƒ†ã‚¹ãƒˆä¾‹

```typescript
// src/hooks/__tests__/useVideoSearch.test.ts
import { renderHook, waitFor } from '@testing-library/react';
import { useVideoSearch } from '../useVideoSearch';
import * as api from '../../utils/api';

jest.mock('../../utils/api');
const mockedApi = api as jest.Mocked<typeof api>;

describe('useVideoSearch', () => {
  beforeEach(() => {
    jest.clearAllMocks();
  });

  it('åˆæœŸçŠ¶æ…‹ã‚’è¿”ã™ã¹ã', () => {
    const { result } = renderHook(() => useVideoSearch());

    expect(result.current.videos).toEqual([]);
    expect(result.current.loading).toBe(false);
    expect(result.current.error).toBeNull();
  });

  it('å‹•ç”»æ¤œç´¢ã‚’æ­£å¸¸ã«å®Ÿè¡Œã™ã¹ã', async () => {
    const mockVideos = [
      { id: '1', title: 'ãƒ†ã‚¹ãƒˆå‹•ç”» 1' },
      { id: '2', title: 'ãƒ†ã‚¹ãƒˆå‹•ç”» 2' },
    ];

    mockedApi.searchVideos.mockResolvedValue({
      videos: mockVideos,
      totalResults: 2,
    });

    const { result } = renderHook(() => useVideoSearch());

    result.current.searchVideos('ãƒ†ã‚¹ãƒˆã‚¯ã‚¨ãƒª');

    expect(result.current.loading).toBe(true);

    await waitFor(() => {
      expect(result.current.loading).toBe(false);
      expect(result.current.videos).toEqual(mockVideos);
      expect(result.current.error).toBeNull();
    });
  });

  it('æ¤œç´¢ã‚¨ãƒ©ãƒ¼ã‚’å‡¦ç†ã™ã¹ã', async () => {
    const errorMessage = 'æ¤œç´¢ã«å¤±æ•—ã—ã¾ã—ãŸ';
    mockedApi.searchVideos.mockRejectedValue(new Error(errorMessage));

    const { result } = renderHook(() => useVideoSearch());

    result.current.searchVideos('ãƒ†ã‚¹ãƒˆã‚¯ã‚¨ãƒª');

    await waitFor(() => {
      expect(result.current.loading).toBe(false);
      expect(result.current.videos).toEqual([]);
      expect(result.current.error).toBe(errorMessage);
    });
  });
});
```

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ

#### æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

- **Jest**: ãƒ†ã‚¹ãƒˆãƒ©ãƒ³ãƒŠãƒ¼ã¨ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
- **Supertest**: HTTP ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆ
- **Sinon**: ãƒ¢ãƒƒã‚­ãƒ³ã‚°ã¨ã‚¹ã‚¿ãƒ–
- **Nock**: HTTP ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ¢ãƒƒã‚­ãƒ³ã‚°

#### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

```bash
cd backend

# å…¨ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
npm test

# ã‚¦ã‚©ãƒƒãƒãƒ¢ãƒ¼ãƒ‰ã§ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
npm test -- --watch

# ã‚«ãƒãƒ¬ãƒƒã‚¸ä»˜ãã§ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
npm test -- --coverage

# ç‰¹å®šã®ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’å®Ÿè¡Œ
npm test routes/youtube.test.js

# ãƒ‘ã‚¿ãƒ¼ãƒ³ã«ãƒãƒƒãƒã™ã‚‹ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
npm test -- --testNamePattern="should return search results"
```

#### API ãƒ«ãƒ¼ãƒˆãƒ†ã‚¹ãƒˆä¾‹

```javascript
// src/routes/__tests__/youtube.test.js
const request = require('supertest');
const app = require('../../index');
const YouTubeService = require('../../services/youtubeService');
const redisClient = require('../../config/redis');

jest.mock('../../services/youtubeService');
jest.mock('../../config/redis');

describe('YouTube Routes', () => {
  let mockYouTubeService;
  let mockRedisClient;

  beforeEach(() => {
    mockYouTubeService = new YouTubeService();
    mockRedisClient = redisClient;
    jest.clearAllMocks();
  });

  describe('GET /api/videos/search', () => {
    it('æ¤œç´¢çµæœã‚’è¿”ã™ã¹ã', async () => {
      const mockVideos = [
        {
          id: 'test-video-1',
          title: 'eFootball ãƒ†ã‚¹ãƒˆå‹•ç”»',
          description: 'ãƒ†ã‚¹ãƒˆèª¬æ˜',
          thumbnail: { default: 'http://example.com/thumb.jpg' },
          channelTitle: 'ãƒ†ã‚¹ãƒˆãƒãƒ£ãƒ³ãƒãƒ«',
          publishedAt: '2024-01-15T10:30:00Z',
          duration: 'PT10M30S',
          viewCount: 1000,
          category: 'gameplay',
        },
      ];

      mockRedisClient.get.mockResolvedValue(null);
      mockRedisClient.set.mockResolvedValue('OK');
      mockYouTubeService.searchVideos.mockResolvedValue({
        videos: mockVideos,
        totalResults: 1,
      });

      const response = await request(app)
        .get('/api/videos/search')
        .query({ q: 'eFootball', maxResults: 10 })
        .expect(200);

      expect(response.body.videos).toHaveLength(1);
      expect(response.body.videos[0]).toMatchObject({
        id: 'test-video-1',
        title: 'eFootball ãƒ†ã‚¹ãƒˆå‹•ç”»',
      });
      expect(response.body.cached).toBe(false);
    });

    it('åˆ©ç”¨å¯èƒ½ãªå ´åˆã¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚ŒãŸçµæœã‚’è¿”ã™ã¹ã', async () => {
      const cachedResult = {
        videos: [{ id: 'cached-video' }],
        totalResults: 1,
      };

      mockRedisClient.get.mockResolvedValue(JSON.stringify(cachedResult));

      const response = await request(app)
        .get('/api/videos/search')
        .query({ q: 'eFootball' })
        .expect(200);

      expect(response.body.cached).toBe(true);
      expect(response.body.videos).toEqual(cachedResult.videos);
      expect(mockYouTubeService.searchVideos).not.toHaveBeenCalled();
    });

    it('ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ¤œè¨¼ã™ã¹ã', async () => {
      const response = await request(app)
        .get('/api/videos/search')
        .query({ maxResults: 100 }) // æœ€å¤§å€¤ã‚’è¶…é
        .expect(400);

      expect(response.body.error).toBe('ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼');
    });

    it('YouTube APIã‚¨ãƒ©ãƒ¼ã‚’å‡¦ç†ã™ã¹ã', async () => {
      mockRedisClient.get.mockResolvedValue(null);
      mockYouTubeService.searchVideos.mockRejectedValue(
        new Error('YouTube APIã‚¯ã‚©ãƒ¼ã‚¿ã‚’è¶…éã—ã¾ã—ãŸ')
      );

      const response = await request(app)
        .get('/api/videos/search')
        .query({ q: 'eFootball' })
        .expect(502);

      expect(response.body.error).toBe('YouTube APIã‚¨ãƒ©ãƒ¼');
    });
  });
});
```

#### ã‚µãƒ¼ãƒ“ã‚¹ãƒ†ã‚¹ãƒˆä¾‹

```javascript
// src/services/__tests__/youtubeService.test.js
const YouTubeService = require('../youtubeService');
const axios = require('axios');

jest.mock('axios');
const mockedAxios = axios;

describe('YouTubeService', () => {
  let youtubeService;

  beforeEach(() => {
    youtubeService = new YouTubeService();
    jest.clearAllMocks();
  });

  describe('searchVideos', () => {
    it('å‹•ç”»ã‚’æ¤œç´¢ã—ã¦ã‚«ãƒ†ã‚´ãƒ©ã‚¤ã‚ºã™ã¹ã', async () => {
      const mockApiResponse = {
        data: {
          items: [
            {
              id: { videoId: 'test-video-1' },
              snippet: {
                title: 'eFootball ã‚²ãƒ¼ãƒ ãƒ—ãƒ¬ã‚¤ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«',
                description: 'eFootballã®éŠã³æ–¹ã‚’å­¦ã¼ã†',
                thumbnails: {
                  default: { url: 'http://example.com/thumb.jpg' },
                },
                channelTitle: 'ã‚²ãƒ¼ãƒŸãƒ³ã‚°ãƒãƒ£ãƒ³ãƒãƒ«',
                publishedAt: '2024-01-15T10:30:00Z',
              },
            },
          ],
          pageInfo: { totalResults: 1 },
        },
      };

      mockedAxios.get.mockResolvedValue(mockApiResponse);

      const result = await youtubeService.searchVideos(
        'eFootball ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«',
        'tips',
        10
      );

      expect(result.videos).toHaveLength(1);
      expect(result.videos[0]).toMatchObject({
        id: 'test-video-1',
        title: 'eFootball ã‚²ãƒ¼ãƒ ãƒ—ãƒ¬ã‚¤ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«',
        category: 'tips',
      });
      expect(result.totalResults).toBe(1);
    });

    it('APIã‚¨ãƒ©ãƒ¼ã‚’é©åˆ‡ã«å‡¦ç†ã™ã¹ã', async () => {
      mockedAxios.get.mockRejectedValue(new Error('APIã‚¨ãƒ©ãƒ¼'));

      await expect(
        youtubeService.searchVideos('eFootball', 'gameplay', 10)
      ).rejects.toThrow('APIã‚¨ãƒ©ãƒ¼');
    });
  });
});
```

## ğŸ”— çµ±åˆãƒ†ã‚¹ãƒˆ

### API çµ±åˆãƒ†ã‚¹ãƒˆ

çµ±åˆãƒ†ã‚¹ãƒˆã¯ã€ã‚·ã‚¹ãƒ†ãƒ ã®ç•°ãªã‚‹éƒ¨åˆ†ãŒæ­£ã—ãé€£æºã™ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚

#### çµ±åˆãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

```bash
cd tests

# ãƒ†ã‚¹ãƒˆç’°å¢ƒã‚’èµ·å‹•
docker-compose -f docker-compose.test.yml up -d

# çµ±åˆãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
npm run test:integration

# ç‰¹å®šã®çµ±åˆãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
npm run test:integration -- --grep "favorites API"
```

#### çµ±åˆãƒ†ã‚¹ãƒˆä¾‹

```javascript
// tests/integration/api.integration.test.js
const request = require('supertest');
const { setupTestEnvironment, teardownTestEnvironment } = require('./setup');

describe('APIçµ±åˆãƒ†ã‚¹ãƒˆ', () => {
  let app;
  let testUserId;

  beforeAll(async () => {
    app = await setupTestEnvironment();
    testUserId = 'integration-test-user';
  });

  afterAll(async () => {
    await teardownTestEnvironment();
  });

  describe('å‹•ç”»æ¤œç´¢ã¨ãŠæ°—ã«å…¥ã‚Šãƒ•ãƒ­ãƒ¼', () => {
    let searchResults;
    let testVideo;

    it('å‹•ç”»ã‚’æ¤œç´¢ã™ã¹ã', async () => {
      const response = await request(app)
        .get('/api/videos/search')
        .query({ q: 'eFootball', maxResults: 5 })
        .expect(200);

      expect(response.body.videos).toBeDefined();
      expect(response.body.videos.length).toBeGreaterThan(0);

      searchResults = response.body.videos;
      testVideo = searchResults[0];
    });

    it('å‹•ç”»ã‚’ãŠæ°—ã«å…¥ã‚Šã«è¿½åŠ ã™ã¹ã', async () => {
      const response = await request(app)
        .post('/api/favorites')
        .send({
          userId: testUserId,
          video: testVideo,
        })
        .expect(201);

      expect(response.body.success).toBe(true);
      expect(response.body.favorite.videoId).toBe(testVideo.id);
    });

    it('ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŠæ°—ã«å…¥ã‚Šã‚’å–å¾—ã™ã¹ã', async () => {
      const response = await request(app)
        .get('/api/favorites')
        .query({ userId: testUserId })
        .expect(200);

      expect(response.body.favorites).toHaveLength(1);
      expect(response.body.favorites[0].videoId).toBe(testVideo.id);
    });

    it('ãŠæ°—ã«å…¥ã‚Šã‹ã‚‰å‹•ç”»ã‚’å‰Šé™¤ã™ã¹ã', async () => {
      await request(app)
        .delete(`/api/favorites/${testVideo.id}`)
        .query({ userId: testUserId })
        .expect(200);

      const response = await request(app)
        .get('/api/favorites')
        .query({ userId: testUserId })
        .expect(200);

      expect(response.body.favorites).toHaveLength(0);
    });
  });

  describe('æ¤œç´¢å±¥æ­´ãƒ•ãƒ­ãƒ¼', () => {
    it('æ¤œç´¢å±¥æ­´ã‚’è¨˜éŒ²ã™ã¹ã', async () => {
      await request(app)
        .post('/api/search-history')
        .send({
          userId: testUserId,
          query: 'eFootball 2024',
          category: 'gameplay',
          resultCount: 25,
        })
        .expect(201);
    });

    it('æ¤œç´¢å±¥æ­´ã‚’å–å¾—ã™ã¹ã', async () => {
      const response = await request(app)
        .get('/api/search-history')
        .query({ userId: testUserId })
        .expect(200);

      expect(response.body.history).toHaveLength(1);
      expect(response.body.history[0].query).toBe('eFootball 2024');
    });

    it('æ¤œç´¢çµ±è¨ˆã‚’æä¾›ã™ã¹ã', async () => {
      const response = await request(app)
        .get('/api/search-history')
        .query({ userId: testUserId })
        .expect(200);

      expect(response.body.statistics).toBeDefined();
      expect(response.body.statistics.totalSearches).toBeGreaterThan(0);
    });
  });
});
```

## ğŸ­ ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆ

### E2E ãƒ†ã‚¹ãƒˆã‚¹ã‚¿ãƒƒã‚¯

- **Playwright**: ãƒ¢ãƒ€ãƒ³ E2E ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- **Docker**: ã‚³ãƒ³ãƒ†ãƒŠåŒ–ã•ã‚ŒãŸãƒ†ã‚¹ãƒˆç’°å¢ƒ

### E2E ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

```bash
cd tests

# Playwrightãƒ–ãƒ©ã‚¦ã‚¶ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npx playwright install

# å…¨E2Eãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
npm run test:e2e

# ãƒ˜ãƒƒãƒ‰ãƒ¢ãƒ¼ãƒ‰ã§ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œï¼ˆãƒ–ãƒ©ã‚¦ã‚¶è¡¨ç¤ºï¼‰
npm run test:e2e -- --headed

# ç‰¹å®šã®ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’å®Ÿè¡Œ
npm run test:e2e -- search-flow.spec.js

# ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰ã§ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
npm run test:e2e -- --debug
```

### E2E ãƒ†ã‚¹ãƒˆä¾‹

```javascript
// tests/e2e/specs/search-flow.spec.js
const { test, expect } = require('@playwright/test');

test.describe('å‹•ç”»æ¤œç´¢ãƒ•ãƒ­ãƒ¼', () => {
  test.beforeEach(async ({ page }) => {
    await page.goto('http://localhost:3000');
  });

  test('å‹•ç”»ã‚’æ¤œç´¢ã—ã¦çµæœã‚’è¡¨ç¤ºã™ã¹ã', async ({ page }) => {
    // æ¤œç´¢ã‚¯ã‚¨ãƒªã‚’å…¥åŠ›
    await page.fill('[data-testid="search-input"]', 'eFootball 2024');

    // ã‚«ãƒ†ã‚´ãƒªã‚’é¸æŠ
    await page.selectOption('[data-testid="category-select"]', 'gameplay');

    // æ¤œç´¢ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
    await page.click('[data-testid="search-button"]');

    // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°å®Œäº†ã‚’å¾…æ©Ÿ
    await page.waitForSelector('[data-testid="loading-spinner"]', {
      state: 'hidden',
    });

    // çµæœãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
    await expect(page.locator('[data-testid="video-list"]')).toBeVisible();
    await expect(
      page.locator('[data-testid="video-item"]')
    ).toHaveCount.greaterThan(0);

    // å‹•ç”»æƒ…å ±ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
    const firstVideo = page.locator('[data-testid="video-item"]').first();
    await expect(
      firstVideo.locator('[data-testid="video-title"]')
    ).toBeVisible();
    await expect(
      firstVideo.locator('[data-testid="video-thumbnail"]')
    ).toBeVisible();
    await expect(
      firstVideo.locator('[data-testid="video-channel"]')
    ).toBeVisible();
  });

  test('ç©ºã®æ¤œç´¢çµæœã‚’å‡¦ç†ã™ã¹ã', async ({ page }) => {
    // çµæœãŒè¿”ã•ã‚Œãªã„ã‚‚ã®ã‚’æ¤œç´¢
    await page.fill('[data-testid="search-input"]', 'xyzabc123nonexistent');
    await page.click('[data-testid="search-button"]');

    // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°å®Œäº†ã‚’å¾…æ©Ÿ
    await page.waitForSelector('[data-testid="loading-spinner"]', {
      state: 'hidden',
    });

    // ç©ºã®çŠ¶æ…‹ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
    await expect(page.locator('[data-testid="empty-results"]')).toBeVisible();
    await expect(page.locator('[data-testid="empty-results"]')).toContainText(
      'å‹•ç”»ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ'
    );
  });

  test('ã‚«ãƒ†ã‚´ãƒªã§ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã™ã¹ã', async ({ page }) => {
    // ã¾ãšã‚«ãƒ†ã‚´ãƒªãªã—ã§æ¤œç´¢
    await page.fill('[data-testid="search-input"]', 'eFootball');
    await page.click('[data-testid="search-button"]');
    await page.waitForSelector('[data-testid="video-list"]');

    const allResultsCount = await page
      .locator('[data-testid="video-item"]')
      .count();

    // æ¬¡ã«ã‚«ãƒ†ã‚´ãƒªã§ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
    await page.selectOption('[data-testid="category-select"]', 'tips');
    await page.click('[data-testid="search-button"]');
    await page.waitForSelector('[data-testid="video-list"]');

    const filteredResultsCount = await page
      .locator('[data-testid="video-item"]')
      .count();

    // ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã•ã‚ŒãŸçµæœã¯ç•°ãªã‚‹ã¹ãï¼ˆé€šå¸¸ã¯å°‘ãªããªã‚‹ï¼‰
    expect(filteredResultsCount).not.toBe(allResultsCount);
  });
});
```

### å‹•ç”»ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ E2E ãƒ†ã‚¹ãƒˆä¾‹

```javascript
// tests/e2e/specs/video-player-flow.spec.js
const { test, expect } = require('@playwright/test');

test.describe('å‹•ç”»ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒ•ãƒ­ãƒ¼', () => {
  test('å‹•ç”»ã‚’å†ç”Ÿã—ã¦ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã‚’è¡¨ç¤ºã™ã¹ã', async ({ page }) => {
    await page.goto('http://localhost:3000');

    // å‹•ç”»ã‚’æ¤œç´¢ã—ã¦é¸æŠ
    await page.fill('[data-testid="search-input"]', 'eFootball');
    await page.click('[data-testid="search-button"]');
    await page.waitForSelector('[data-testid="video-list"]');
    await page.click('[data-testid="video-item"]', { first: true });

    // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒšãƒ¼ã‚¸ã®èª­ã¿è¾¼ã¿ã‚’å¾…æ©Ÿ
    await page.waitForURL('**/video/**');
    await expect(page.locator('[data-testid="video-player"]')).toBeVisible();

    // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãŒå­˜åœ¨ã™ã‚‹ã“ã¨ã‚’ç¢ºèª
    await expect(page.locator('[data-testid="play-button"]')).toBeVisible();
    await expect(page.locator('[data-testid="volume-control"]')).toBeVisible();
    await expect(
      page.locator('[data-testid="fullscreen-button"]')
    ).toBeVisible();

    // å†ç”Ÿæ©Ÿèƒ½ã‚’ãƒ†ã‚¹ãƒˆ
    await page.click('[data-testid="play-button"]');

    // é–¢é€£å‹•ç”»ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
    await expect(page.locator('[data-testid="related-videos"]')).toBeVisible();
    await expect(
      page.locator('[data-testid="related-video-item"]')
    ).toHaveCount.greaterThan(0);
  });

  test('ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‹ã‚‰å‹•ç”»ã‚’ãŠæ°—ã«å…¥ã‚Šã«è¿½åŠ ã™ã¹ã', async ({ page }) => {
    await page.goto('http://localhost:3000');

    // å‹•ç”»ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã«ç§»å‹•
    await page.fill('[data-testid="search-input"]', 'eFootball');
    await page.click('[data-testid="search-button"]');
    await page.waitForSelector('[data-testid="video-list"]');
    await page.click('[data-testid="video-item"]', { first: true });

    // ãŠæ°—ã«å…¥ã‚Šã«è¿½åŠ 
    await page.click('[data-testid="favorite-button"]');

    // ãŠæ°—ã«å…¥ã‚ŠçŠ¶æ…‹ã‚’ç¢ºèª
    await expect(page.locator('[data-testid="favorite-button"]')).toHaveClass(
      /favorited/
    );

    // ãŠæ°—ã«å…¥ã‚Šãƒšãƒ¼ã‚¸ã«ç§»å‹•
    await page.click('[data-testid="nav-favorites"]');
    await page.waitForURL('**/favorites');

    // å‹•ç”»ãŒãŠæ°—ã«å…¥ã‚Šã«è¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
    await expect(page.locator('[data-testid="favorite-item"]')).toHaveCount(1);
  });
});
```

## ğŸš€ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ

### Artillery ã«ã‚ˆã‚‹è² è·ãƒ†ã‚¹ãƒˆ

#### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¨ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
# Artilleryã‚’ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install -g artillery

# ã¾ãŸã¯npxã‚’ä½¿ç”¨
npx artillery --version
```

#### è² è·ãƒ†ã‚¹ãƒˆè¨­å®šä¾‹

```yaml
# tests/load/api-load-test.yml
config:
  target: 'http://localhost:3001'
  phases:
    - duration: 60
      arrivalRate: 10
      name: 'ã‚¦ã‚©ãƒ¼ãƒ ã‚¢ãƒƒãƒ—'
    - duration: 120
      arrivalRate: 50
      name: 'è² è·å¢—åŠ '
    - duration: 300
      arrivalRate: 100
      name: 'æŒç¶šè² è·'
  defaults:
    headers:
      Content-Type: 'application/json'

scenarios:
  - name: 'å‹•ç”»æ¤œç´¢'
    weight: 70
    flow:
      - get:
          url: '/api/videos/search'
          qs:
            q: 'eFootball'
            maxResults: 25
      - think: 2

  - name: 'äººæ°—å‹•ç”»å–å¾—'
    weight: 20
    flow:
      - get:
          url: '/api/videos/popular'
          qs:
            maxResults: 25
      - think: 3

  - name: 'ãŠæ°—ã«å…¥ã‚Šç®¡ç†'
    weight: 10
    flow:
      - post:
          url: '/api/favorites'
          json:
            userId: 'load-test-user-{{ $randomNumber() }}'
            video:
              id: 'test-video-{{ $randomNumber() }}'
              title: 'ãƒ†ã‚¹ãƒˆå‹•ç”»'
              description: 'è² è·ãƒ†ã‚¹ãƒˆå‹•ç”»'
              thumbnail:
                default: 'http://example.com/thumb.jpg'
              channelTitle: 'ãƒ†ã‚¹ãƒˆãƒãƒ£ãƒ³ãƒãƒ«'
              publishedAt: '2024-01-15T10:30:00Z'
              duration: 'PT10M30S'
              viewCount: 1000
              category: 'gameplay'
      - think: 1
```

#### è² è·ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

```bash
# è² è·ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
artillery run tests/load/api-load-test.yml

# ã‚«ã‚¹ã‚¿ãƒ ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã§å®Ÿè¡Œ
artillery run tests/load/api-load-test.yml --target https://api.your-domain.com

# HTMLãƒ¬ãƒãƒ¼ãƒˆã‚’ç”Ÿæˆ
artillery run tests/load/api-load-test.yml --output report.json
artillery report report.json
```

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ

#### Lighthouse CI

```bash
# Lighthouse CIã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install -g @lhci/cli

# Lighthouseç›£æŸ»ã‚’å®Ÿè¡Œ
lhci autorun --upload.target=temporary-public-storage
```

#### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆè¨­å®š

```json
// lighthouserc.json
{
  "ci": {
    "collect": {
      "url": ["http://localhost:3000"],
      "startServerCommand": "npm run dev",
      "numberOfRuns": 3
    },
    "assert": {
      "assertions": {
        "categories:performance": ["warn", { "minScore": 0.8 }],
        "categories:accessibility": ["error", { "minScore": 0.9 }],
        "categories:best-practices": ["warn", { "minScore": 0.8 }],
        "categories:seo": ["warn", { "minScore": 0.8 }]
      }
    }
  }
}
```

## ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆ

### ä¾å­˜é–¢ä¿‚è„†å¼±æ€§ã‚¹ã‚­ãƒ£ãƒ³

```bash
# npmä¾å­˜é–¢ä¿‚ã‚’ç›£æŸ»
npm audit

# è„†å¼±æ€§ã‚’è‡ªå‹•ä¿®æ­£
npm audit fix

# å¤ã„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ç¢ºèª
npm outdated
```

### OWASP ZAP ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆ

```bash
# OWASP ZAPãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ã‚¹ã‚­ãƒ£ãƒ³ã‚’å®Ÿè¡Œ
docker run -t owasp/zap2docker-stable zap-baseline.py -t http://localhost:3000
```

## ğŸ“Š ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸

### ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆ

```bash
# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆã‚’ç”Ÿæˆ
cd frontend && npm test -- --coverage

# ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆã‚’ç”Ÿæˆ
cd backend && npm test -- --coverage

# ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆã‚’çµåˆ
npm run test:coverage
```

### ã‚«ãƒãƒ¬ãƒƒã‚¸ã—ãã„å€¤

```json
// jest.config.js
module.exports = {
  coverageThreshold: {
    global: {
      branches: 80,
      functions: 80,
      lines: 80,
      statements: 80
    }
  }
};
```

## ğŸ”„ ç¶™ç¶šçš„ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

### GitHub Actions ãƒ†ã‚¹ãƒˆãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

```yaml
# .github/workflows/test.yml
name: ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆ

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main]

jobs:
  unit-tests:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        node-version: [18.x, 20.x]

    steps:
      - uses: actions/checkout@v3
      - name: Node.js ${{ matrix.node-version }} ã‚’ä½¿ç”¨
        uses: actions/setup-node@v3
        with:
          node-version: ${{ matrix.node-version }}
          cache: 'npm'

      - name: ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
        run: |
          npm ci
          cd frontend && npm ci
          cd ../backend && npm ci
          cd ../tests && npm ci

      - name: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
        run: cd frontend && npm test -- --coverage --watchAll=false

      - name: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
        run: cd backend && npm test -- --coverage --watchAll=false

      - name: Codecovã«ã‚«ãƒãƒ¬ãƒƒã‚¸ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
        uses: codecov/codecov-action@v3

  integration-tests:
    runs-on: ubuntu-latest
    services:
      redis:
        image: redis:7-alpine
        ports:
          - 6379:6379
      localstack:
        image: localstack/localstack:latest
        ports:
          - 4566:4566
        env:
          SERVICES: dynamodb

    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '18'
          cache: 'npm'

      - name: ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
        run: |
          npm ci
          cd tests && npm ci

      - name: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’èµ·å‹•
        run: |
          docker-compose up -d --build
          sleep 30

      - name: çµ±åˆãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
        run: cd tests && npm run test:integration

  e2e-tests:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '18'
          cache: 'npm'

      - name: ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
        run: |
          npm ci
          cd tests && npm ci

      - name: Playwrightã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
        run: cd tests && npx playwright install --with-deps

      - name: ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’èµ·å‹•
        run: |
          docker-compose up -d --build
          sleep 30

      - name: E2Eãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
        run: cd tests && npm run test:e2e

      - name: ãƒ†ã‚¹ãƒˆçµæœã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
        uses: actions/upload-artifact@v3
        if: always()
        with:
          name: playwright-report
          path: tests/playwright-report/
```

## ğŸ› ãƒ†ã‚¹ãƒˆãƒ‡ãƒãƒƒã‚°

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆãƒ‡ãƒãƒƒã‚°

```bash
# ç‰¹å®šã®ãƒ†ã‚¹ãƒˆã‚’ãƒ‡ãƒãƒƒã‚°
npm test -- --testNamePattern="should render" --verbose

# ãƒ‡ãƒãƒƒã‚¬ãƒ¼ä»˜ãã§ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
node --inspect-brk node_modules/.bin/jest --runInBand

# VS Codeãƒ‡ãƒãƒƒã‚¬ãƒ¼ã‚’ä½¿ç”¨
# .vscode/launch.jsonã«è¿½åŠ :
{
  "type": "node",
  "request": "launch",
  "name": "Jestãƒ†ã‚¹ãƒˆã‚’ãƒ‡ãƒãƒƒã‚°",
  "program": "${workspaceFolder}/node_modules/.bin/jest",
  "args": ["--runInBand"],
  "console": "integratedTerminal",
  "internalConsoleOptions": "neverOpen"
}
```

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆãƒ‡ãƒãƒƒã‚°

```bash
# Node.jsã‚¤ãƒ³ã‚¹ãƒšã‚¯ã‚¿ãƒ¼ã§ãƒ‡ãƒãƒƒã‚°
node --inspect-brk node_modules/.bin/jest --runInBand

# ãƒ‡ãƒãƒƒã‚°ç”¨ã«console.logã‚’ä½¿ç”¨
console.log('ãƒ‡ãƒãƒƒã‚°æƒ…å ±:', JSON.stringify(data, null, 2));
```

### E2E ãƒ†ã‚¹ãƒˆãƒ‡ãƒãƒƒã‚°

```bash
# ãƒ˜ãƒƒãƒ‰ãƒ¢ãƒ¼ãƒ‰ã§å®Ÿè¡Œ
npx playwright test --headed

# ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰ã§å®Ÿè¡Œ
npx playwright test --debug

# ãƒˆãƒ¬ãƒ¼ã‚¹ã‚’ç”Ÿæˆ
npx playwright test --trace on
```

## ğŸ“š ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### ãƒ†ã‚¹ãƒˆæ§‹æˆ

- é–¢é€£ã™ã‚‹ãƒ†ã‚¹ãƒˆã‚’ describe ãƒ–ãƒ­ãƒƒã‚¯ã§ã‚°ãƒ«ãƒ¼ãƒ—åŒ–
- èª¬æ˜çš„ãªãƒ†ã‚¹ãƒˆåã‚’ä½¿ç”¨
- AAA ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆArrangeã€Actã€Assertï¼‰ã«å¾“ã†
- ãƒ†ã‚¹ãƒˆã‚’ç‹¬ç«‹ã—ã¦åˆ†é›¢ã•ã‚ŒãŸçŠ¶æ…‹ã«ä¿ã¤

### ãƒ¢ãƒƒã‚­ãƒ³ã‚°ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

- å¤–éƒ¨ä¾å­˜é–¢ä¿‚ã‚’ãƒ¢ãƒƒã‚¯
- å†…éƒ¨ã‚³ãƒ¼ãƒ‰ã«ã¯å®Ÿè£…ã‚’ä½¿ç”¨
- ãƒ†ã‚¹ãƒˆé–“ã§ãƒ¢ãƒƒã‚¯ã‚’ãƒªã‚»ãƒƒãƒˆ
- é–¢é€£ã™ã‚‹å ´åˆã¯ãƒ¢ãƒƒã‚¯å‘¼ã³å‡ºã—ã‚’æ¤œè¨¼

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è€ƒæ…®äº‹é …

- å¯èƒ½ãªå ´åˆã¯ãƒ†ã‚¹ãƒˆã‚’ä¸¦åˆ—å®Ÿè¡Œ
- çµ±åˆãƒ†ã‚¹ãƒˆã«ã¯ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½¿ç”¨
- ãƒ†ã‚¹ãƒˆå¾Œã«ãƒªã‚½ãƒ¼ã‚¹ã‚’ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
- ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚’æœ€é©åŒ–

### ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹

- ã‚³ãƒ¼ãƒ‰å¤‰æ›´ã«åˆã‚ã›ã¦ãƒ†ã‚¹ãƒˆã‚’æœ€æ–°ã«ä¿ã¤
- å¤ã„ãƒ†ã‚¹ãƒˆã‚’å‰Šé™¤
- æœ¬ç•ªã‚³ãƒ¼ãƒ‰ã®ã‚ˆã†ã«ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
- ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ™‚é–“ã‚’ç›£è¦–

---

è©³ç´°ã«ã¤ã„ã¦ã¯ã€[ãƒ¡ã‚¤ãƒ³ README](../README.md) ã¾ãŸã¯ [é–‹ç™ºã‚¬ã‚¤ãƒ‰](./DEVELOPMENT.md) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚
